

mixin userslist(roomName)
    style.
        div.hiddenroomtitle{display:none; }
        div.userslist {
            height:80%;
            width: 100%;
            overflow-y: scroll;
        }
        #presentUsers {
            list-style-type: none;
            margin: 0;
            padding: 0;
            position: relative;
            width: 80%;
        }
        #presentUsers li {
            position: relative;
            height: 1em;
            width: 100%;
            padding-right: 5%;
            padding-top: 10%;
            padding-bottom: 10%;
            padding-left: 2%;
        }

        /*#presentUsers li:nth-child(odd) { background: #eee; } */

        #presentUsers li div.turnIcon {
            position: relative;
            width: 20%;
            height: 1em;
            float: left;
        }
        #presentUsers li div.userName {
            position: relative;
            width: 80%;
            float: right;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #presentUsers li div.hasTurn {
            background: url("/resources/pencil.png") center no-repeat;
            background-size: 15px;
        }

    
    div.hiddenroomtitle= roomName
    div.userstitle users
    div.userslist
        ul(id="presentUsers")

    script.
        //var users = {};
        // populate user list
        socket.emit("user list", {roomName: $('div.hiddenroomtitle').html()});
        socket.on("user list", function(data){
            //users = {};
            $('#presentUsers').html("");
            for (var i=0; i<data.length; i++) {
                var user = data[i];
                $('#presentUsers').append($('<li>')
                    .css('background-color', user.color)
                    .addClass(user.publicid)
                    .append($('<div>')
                        .addClass('userName')
                        .text(user.name))
                    .append($('<div>')
                        .addClass('turnIcon'))
                );
                //users[pid] = user.name;
            }
        });
        // refresh whever a user leaves or joins
        socket.on("user left", function(data){
            socket.emit("user list", {roomName: $('div.hiddenroomtitle').html()});
        });
        socket.on("user joined", function(data){
            socket.emit("user list", {roomName: $('div.hiddenroomtitle').html()});
        });

